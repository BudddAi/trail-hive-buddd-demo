---
interface ToggleSwitchProps {
  options: string[];
}

export interface Props extends ToggleSwitchProps {}

const { options } = Astro.props;
---

<div class="bg-color-55 rounded-full p-1 flex items-center space-x-1" data-toggle-switch>
  {options && options.length > 0 && options.map((option, index) => (
    <button
      class={`py-2 px-4 sm:px-5 rounded-full text-base font-normal font-font-5 transition-colors duration-300 cursor-pointer no-underline ${
        index === 0 ? 'bg-color-5 text-color-55' : 'text-color-5 bg-transparent'
      }`}
      data-option={option.toLowerCase()}
      data-index={index}
    >
      {option}
    </button>
  ))}
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleSwitch = document.querySelector('[data-toggle-switch]');
    const buttons = toggleSwitch?.querySelectorAll('button[data-option]');
    const pricingCards = document.querySelectorAll('[data-pricing-card]');
    
    if (!buttons || !pricingCards) return;
    
    let currentCycle = 'monthly';
    
    buttons.forEach(button => {
      button.addEventListener('click', () => {
        const option = button.dataset.option;
        if (!option) return;
        
        currentCycle = option;
        
        // Update button states
        buttons.forEach(btn => {
          btn.classList.remove('bg-color-5', 'text-color-55');
          btn.classList.add('text-color-5', 'bg-transparent');
        });
        
        button.classList.remove('text-color-5', 'bg-transparent');
        button.classList.add('bg-color-5', 'text-color-55');
        
        // Update pricing displays
        pricingCards.forEach(card => {
          const monthlyPrice = card.querySelector('[data-monthly-price]');
          const yearlyPrice = card.querySelector('[data-yearly-price]');
          
          if (monthlyPrice && yearlyPrice) {
            if (currentCycle === 'monthly') {
              monthlyPrice.style.display = 'block';
              yearlyPrice.style.display = 'none';
            } else {
              monthlyPrice.style.display = 'none';
              yearlyPrice.style.display = 'block';
            }
          }
        });
      });
    });
  });
</script>